{{/* Generate tool pages from JSON data */}}
{{- $toolData := .Site.Data.tools -}}
{{- $auxData := .Site.Data.tools_auxiliary -}}

{{- range $toolData.tools -}}
  {{- $id := .id -}}
  {{- $aux := index $auxData.tools $id -}}

  {{/* Build markdown content from JSON structure */}}
  {{- $content := "" -}}
  {{- with $aux -}}
    {{- $content = .content -}}
    {{- range .sections -}}
      {{- $content = printf "%s\n\n## %s\n\n" $content .heading -}}
      {{- with .content -}}
        {{- $content = printf "%s%s\n" $content . -}}
      {{- end -}}
      {{- with .list -}}
        {{- range . -}}
          {{- $content = printf "%s- %s\n" $content . -}}
        {{- end -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}

  {{- $params := dict
    "title" .title
    "description" .description
    "category" .category
    "website" .website
    "weight" .weight
  -}}
  {{- $page := dict
    "path" $id
    "title" .title
    "kind" "page"
    "params" $params
    "content" (dict "mediaType" "text/markdown" "value" $content)
  -}}
  {{- $.AddPage $page -}}
{{- end -}}
