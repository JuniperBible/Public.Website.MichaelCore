{{/*
  Color Picker Partial

  Generates a color picker button and dropdown for selecting highlight colors.

  Parameters (via dict):
    - id (string, required): Prefix for element IDs (e.g., "highlight" or "sss-highlight")
    - optionClass (string, required): CSS class for color option buttons (e.g., "color-option" or "sss-color-option")
    - colors (slice, optional): Custom color options. Defaults to grayscale palette.
      Each color should be a dict with "value" and "label" keys.
      Example: (slice (dict "value" "#222" "label" "Dark") (dict "value" "#666" "label" "Medium"))

  Usage:
    {{ partial "michael/color-picker.html" (dict "id" "highlight" "optionClass" "color-option") }}
    {{ partial "michael/color-picker.html" (dict "id" "sss-highlight" "optionClass" "sss-color-option") }}

  Notes:
    - The picker button has ID: {{ .id }}-color-btn
    - The picker div has ID: {{ .id }}-color-picker
    - JavaScript should handle toggling the "hidden" class and updating button background color
    - Default colors are accessible grayscale options (#222, #444, #666, #888, #aaa)
*/}}
{{ $id := .id }}
{{ $optionClass := .optionClass }}
{{ $defaultColors := slice
  (dict "value" "#222" "label" "Dark")
  (dict "value" "#444" "label" "Medium Dark")
  (dict "value" "#666" "label" "Medium")
  (dict "value" "#888" "label" "Medium Light")
  (dict "value" "#aaa" "label" "Light")
}}
{{ $colors := .colors | default $defaultColors }}
<button id="{{ $id }}-color-btn" class="btn btn--sm" style="background-color: #666; width: 24px; height: 24px; padding: 0;" title="Choose highlight color" aria-label="Choose highlight color"></button>
<div id="{{ $id }}-color-picker" class="hidden" style="position: absolute; background: var(--surface-1); border: 1px solid var(--border); border-radius: var(--radius-1); padding: 8px; z-index: 10;">
  <div class="row" style="gap: 4px;">
    {{ range $colors }}
    <button class="{{ $optionClass }} btn btn--sm" data-color="{{ .value }}" style="background:{{ .value }}; width:24px; height:24px; padding:0;" title="{{ .label }}" aria-label="{{ .label }}"></button>
    {{ end }}
  </div>
</div>
