{{/*
  color-picker.html - Color picker component

  Usage:
    {{ partial "michael/color-picker.html" (dict
      "id_prefix" "left"
      "colors" (slice
        (dict "hex" "#000000" "name" "Black")
        (dict "hex" "#FF0000" "name" "Red")
        (dict "hex" "#00FF00" "name" "Green")
        (dict "hex" "#0000FF" "name" "Blue")
      )
    ) }}

  Parameters:
    - id_prefix (string, required): Prefix for unique element IDs (e.g., "left", "right")
    - colors (slice, required): Array of color dicts with:
        - hex (string, required): Color hex code (e.g., "#FF0000")
        - name (string, required): Color name for display
*/}}

{{ $buttonId := printf "%s-color-btn" .id_prefix }}
{{ $dropdownId := printf "%s-color-dropdown" .id_prefix }}

<div class="color-picker">
  <button
    type="button"
    id="{{ $buttonId }}"
    class="color-button"
    aria-haspopup="true"
    aria-expanded="false"
    aria-controls="{{ $dropdownId }}"
    aria-label="Choose color for {{ .id_prefix }} panel"
  >
    <span class="color-swatch" style="background-color: {{ (index .colors 0).hex }};"></span>
    <span class="color-name">{{ (index .colors 0).name }}</span>
  </button>

  <div
    id="{{ $dropdownId }}"
    class="color-dropdown"
    role="menu"
    hidden
    aria-labelledby="{{ $buttonId }}"
  >
    {{ range .colors }}
      <button
        type="button"
        class="color-option"
        role="menuitem"
        data-color="{{ .hex }}"
        data-name="{{ .name }}"
        tabindex="-1"
      >
        <span class="color-swatch" style="background-color: {{ .hex }};"></span>
        <span class="color-name">{{ .name }}</span>
      </button>
    {{ end }}
  </div>
</div>
