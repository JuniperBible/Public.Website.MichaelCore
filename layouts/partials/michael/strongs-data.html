{{- /*
  Strong's Definitions Data Injector

  This partial injects Strong's Hebrew and Greek lexicon data into the page
  for offline use. The data is loaded from JSON files and made available
  to the strongs.js script via window.Michael.StrongsData.

  Usage: {{ partial "michael/strongs-data.html" . }}
*/ -}}

{{- $hebrewData := "" -}}
{{- $greekData := "" -}}

{{- /* Try loading from Hugo's data directory first */ -}}
{{- if isset site.Data "strongs" -}}
  {{- if isset site.Data.strongs "hebrew" -}}
    {{- $hebrewData = site.Data.strongs.hebrew -}}
  {{- end -}}
  {{- if isset site.Data.strongs "greek" -}}
    {{- $greekData = site.Data.strongs.greek -}}
  {{- end -}}
{{- else -}}
  {{- /* Fallback to resources.Get */ -}}
  {{- with resources.Get "data/strongs/hebrew.json" -}}
    {{- $hebrewData = . | transform.Unmarshal -}}
  {{- end -}}
  {{- with resources.Get "data/strongs/greek.json" -}}
    {{- $greekData = . | transform.Unmarshal -}}
  {{- end -}}
{{- end -}}

{{- /* Initialize Michael namespace if needed */ -}}
<script>
  window.Michael = window.Michael || {};
  window.Michael.StrongsData = window.Michael.StrongsData || {};
</script>

{{- if $hebrewData -}}
<script>
  // Hebrew Strong's definitions ({{ len $hebrewData }} entries)
  window.Michael.StrongsData.hebrew = {{ $hebrewData | jsonify | safeJS }};
</script>
{{- else -}}
<!-- Warning: Hebrew Strong's data not found at data/strongs/hebrew.json -->
{{- end -}}

{{- if $greekData -}}
<script>
  // Greek Strong's definitions ({{ len $greekData }} entries)
  window.Michael.StrongsData.greek = {{ $greekData | jsonify | safeJS }};
</script>
{{- else -}}
<!-- Warning: Greek Strong's data not found at data/strongs/greek.json -->
{{- end -}}
