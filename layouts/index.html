{{ define "main" }}
<main class="container" style="padding: var(--pad-3) var(--pad-2);">
  <div class="panel">
    <header class="page-header">
      <h1>{{ .Site.Title }}</h1>
      {{ with .Site.Params.description }}<p>{{ . }}</p>{{ end }}
    </header>

    {{/* Try /bibles first (standalone), then /religion/bibles (module) */}}
    {{ $biblesPage := .Site.GetPage "/bibles" }}
    {{ if not $biblesPage }}{{ $biblesPage = .Site.GetPage "/religion/bibles" }}{{ end }}

    {{ with $biblesPage }}
    <section>
      <h2>Bible Translations</h2>
      <div class="grid-2">
        {{ $count := 0 }}
        {{ range .Pages }}
        {{ if and .Params.abbrev (lt $count 4) }}
        <a href="{{ .RelPermalink }}" class="card">
          <h3 class="card__title">{{ .Title }}</h3>
          {{ with .Description }}<p class="card__meta">{{ . }}</p>{{ end }}
        </a>
        {{ $count = add $count 1 }}
        {{ end }}
        {{ end }}
      </div>
      <nav class="actions">
        <a href="{{ .RelPermalink }}" class="btn btn--primary">View All Bibles</a>
      </nav>
    </section>
    {{ end }}
  </div>
</main>
{{ end }}
