/* ==========================================================================
   Michael Bible Module — Custom Theme Overrides

   This file is for site-specific customizations that override the default
   theme styles. It is loaded last, so all rules here take precedence.

   Color palette and font sourced from juniperbible.org
   ========================================================================== */

/* -----------------------------
   Patrick Hand font (self-hosted)
   License: SIL Open Font License 1.1
   Source: Google Fonts — Patrick Hand by Patrick Wagesreiter
------------------------------ */
@font-face {
  font-family: "Patrick Hand";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("/fonts/patrick-hand-latin.woff2") format("woff2");
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191,
    U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: "Patrick Hand";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("/fonts/patrick-hand-latin-ext.woff2") format("woff2");
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7,
    U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F,
    U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F,
    U+A720-A7FF;
}

/* -----------------------------
   Custom Color Overrides
   Dark mode is default, light mode for prefers-color-scheme: light
   Color palette matched to juniperbible.org
------------------------------ */
:root {
  /* Dark Mode (Default) */

  /* Brand - Muted purple (juniperbible accent) - lighter for dark bg */
  --brand-100: #3d2e4a;
  --brand-400: #a88da8;
  --brand-500: #c4a8c4;
  --brand-600: #d9c4d9;

  /* Success - Green */
  --success-100: #1a2e1a;
  --success-500: #4ade80;

  /* Chrome (header/footer) - Dark teal */
  --chrome-800: #223836;
  --chrome-900: #1a3230;
  --chrome-text: rgba(255, 255, 255, 0.92);

  /* Background / Surfaces (dark theme) */
  --bg-0: #1a1a1a;
  --surface-0: #252525;
  --surface-1: #2d2d2d;
  --surface-2: #353535;

  /* Text (light on dark) */
  --text-900: #f0f0f0;
  --text-700: #d0d0d0;
  --text-500: #a0a0a0;
  --text-400: #808080;

  /* Links */
  --link: var(--brand-500);

  /* Borders */
  --border: #404040;
  --border-strong: #505050;
  --border-hover: #606060;

  /* Shadows (subtle on dark) */
  --shadow-0: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-1: 0 4px 6px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.3);

  /* Focus ring */
  --focus-ring: 0 0 0 3px rgba(196, 168, 196, 0.45);

  /* Diff highlighting colors (darker variants for dark mode) */
  --diff-add: #1a3d1a;
  --diff-omit: #3a3a3a;
  --diff-punct: #4a4020;
  --diff-spelling: #4a3520;
  --diff-subst: #4a2020;

  /* State colors (dark mode) */
  --state-error: #ef5350;
  --state-error-bg: #3d1a1a;

  /* Surface alpha (semi-transparent dark) */
  --surface-alpha: rgba(0, 0, 0, 0.3);

  /* Subtle backgrounds */
  --bg-light: rgba(255, 255, 255, 0.06);

  /* Font */
  --font-hand: "Patrick Hand", cursive;
}

/* Light mode (for users who prefer it) */
@media (prefers-color-scheme: light) {
  :root {
    /* Brand - Muted purple (juniperbible accent) */
    --brand-100: #f0e0f0;
    --brand-400: #7d5c7d;
    --brand-500: #6b4c6b;
    --brand-600: #684580;

    /* Success - Green */
    --success-100: #e8f5e9;
    --success-500: #16a34a;

    /* Background / Surfaces (warm parchment) */
    --bg-0: #b8a080;
    --surface-0: #e6ddc0;
    --surface-1: #ebe5d8;
    --surface-2: #ffffff;

    /* Text */
    --text-900: #1a1a1a;
    --text-700: #4a4540;
    --text-500: #6b6560;
    --text-400: #857f78;

    /* Borders */
    --border: #d4cfc5;
    --border-strong: #b8b2a6;
    --border-hover: rgba(0, 0, 0, 0.55);

    /* Shadows */
    --shadow-0: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-1: 0 4px 6px rgba(0, 0, 0, 0.07), 0 1px 3px rgba(0, 0, 0, 0.05);

    /* Focus ring */
    --focus-ring: 0 0 0 3px rgba(107, 76, 107, 0.35);

    /* Diff highlighting colors (light mode) */
    --diff-add: #ccffcc;
    --diff-omit: #e6e6e6;
    --diff-punct: #ffeb99;
    --diff-spelling: #ffe0b3;
    --diff-subst: #ffcccc;

    /* State colors (light mode) */
    --state-error: #d32f2f;
    --state-error-bg: #ffebee;

    /* Surface alpha */
    --surface-alpha: rgba(255, 255, 255, 0.55);

    /* Subtle backgrounds */
    --bg-light: rgba(0, 0, 0, 0.04);
  }
}

/* -----------------------------
   Custom Component Overrides
   Apply handwritten font to UI elements
------------------------------ */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-hand);
}

.btn,
.badge,
.chrome a,
.chrome .site-title,
.nav a {
  font-family: var(--font-hand);
}

/* Header/footer nav and site title — doubled from default */
.nav a {
  font-size: 2rem;
  padding: 20px 12px;
}

.nav a:first-child strong {
  font-size: 2rem;
}

.footer-copyright {
  font-size: 0.65rem;
}

/* Compare controls - match header width and rounded corners */
.compare-controls {
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
  border-radius: var(--radius-2, 12px);
}

/* -----------------------------
   Reader Toggles
   Full-width and side-by-side controls
------------------------------ */
.reader-toggles {
  display: inline-flex;
  gap: 4px;
  margin-left: auto;
}

.reader-toggles .btn {
  padding: 6px 8px;
}

.reader-toggles .btn[aria-pressed="true"] {
  background: var(--brand-500);
  color: var(--surface-0);
  border-color: var(--brand-500);
}

/* Full-width mode */
body.full-width-mode main.container {
  max-width: 100%;
  padding-left: var(--pad-2);
  padding-right: var(--pad-2);
}

body.full-width-mode .panel {
  max-width: 100%;
}

body.full-width-mode .reader-bar {
  max-width: 100%;
}

/* SSS (Side-by-Side Scripture) mode for chapter pages */
.chapter-sss-container {
  display: none;
}

body.sss-chapter-mode .chapter-content-single {
  display: none;
}

body.sss-chapter-mode .chapter-sss-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--pad-2);
}

.chapter-sss-pane {
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: var(--radius-1);
  padding: var(--pad-2);
  min-height: 400px;
  overflow: auto;
}

.chapter-sss-pane .pane-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-bottom: var(--pad-1);
  margin-bottom: var(--pad-1);
  border-bottom: 1px solid var(--border);
}

.chapter-sss-pane .pane-header select {
  flex: 1;
}

.chapter-sss-pane .pane-content {
  min-height: 300px;
}

.chapter-sss-pane .pane-content .loading {
  text-align: center;
  color: var(--text-500);
  padding: var(--pad-3);
}

/* SSS verse alignment */
.chapter-sss-pane .verse {
  border-bottom: 1px solid var(--border);
  padding-bottom: var(--pad-1);
  margin-bottom: var(--pad-1);
}

/* Mobile: stack SSS panes vertically */
@media (max-width: 768px) {
  body.sss-chapter-mode .chapter-sss-container {
    grid-template-columns: 1fr;
  }

  .reader-toggles {
    width: 100%;
    justify-content: flex-end;
    margin-top: 8px;
  }
}
