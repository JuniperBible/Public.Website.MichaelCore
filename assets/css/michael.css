/**
 * Michael Bible Module - Custom CSS
 * Built on PicoCSS with semantic HTML5
 *
 * This file provides:
 * 1. Custom properties for the paper theme
 * 2. Component-specific overrides
 * 3. Bible-specific styling
 */

/* ==========================================================================
   Custom Properties - Paper Theme
   ========================================================================== */

:root {
  /* Paper color palette */
  --michael-cream: #faf8f5;
  --michael-white: #ffffff;
  --michael-light: #f5f3f0;
  --michael-bright: #fdfcfa;
  --michael-border: #e5e0d8;
  --michael-gray: #6b6560;
  --michael-black: #2d2a26;
  --michael-brown: #8b7355;
  --michael-accent: #6b4c6b;
  --michael-accent-hover: #7d5c7d;

  /* Typography */
  --michael-font-hand: "Patrick Hand", cursive, system-ui;

  /* Map to Pico variables */
  --pico-font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  --pico-background-color: var(--michael-cream);
  --pico-color: var(--michael-black);
  --pico-muted-color: var(--michael-gray);
  --pico-muted-border-color: var(--michael-border);
  --pico-primary: var(--michael-accent);
  --pico-primary-hover: var(--michael-accent-hover);
  --pico-card-background-color: var(--michael-white);
  --pico-card-border-color: var(--michael-border);
  --pico-card-sectioning-background-color: var(--michael-light);

  /* Form elements */
  --pico-form-element-background-color: var(--michael-white);
  --pico-form-element-border-color: var(--michael-border);
  --pico-form-element-focus-color: var(--michael-accent);

  /* Table */
  --pico-table-border-color: var(--michael-border);
  --pico-table-row-stripped-background-color: var(--michael-bright);
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --michael-cream: #1a1918;
    --michael-white: #252321;
    --michael-light: #2d2a26;
    --michael-bright: #353230;
    --michael-border: #4a4540;
    --michael-gray: #a09890;
    --michael-black: #f5f3f0;
    --michael-brown: #c9a878;
  }
}

[data-theme="dark"] {
  --michael-cream: #1a1918;
  --michael-white: #252321;
  --michael-light: #2d2a26;
  --michael-bright: #353230;
  --michael-border: #4a4540;
  --michael-gray: #a09890;
  --michael-black: #f5f3f0;
  --michael-brown: #c9a878;
}

/* ==========================================================================
   Typography Overrides
   ========================================================================== */

.font-hand {
  font-family: var(--michael-font-hand);
}

/* ==========================================================================
   Component: Page Header
   ========================================================================== */

.michael-header {
  text-align: center;
  margin-block-end: var(--pico-spacing);
}

.michael-header h1 {
  font-family: var(--michael-font-hand);
  margin-block-end: 0.25em;
}

.michael-header p {
  color: var(--michael-gray);
  font-family: var(--michael-font-hand);
}

/* ==========================================================================
   Component: Tags/Badges
   ========================================================================== */

.tag {
  display: inline-block;
  padding: 0.125rem 0.5rem;
  border-radius: var(--pico-border-radius);
  font-size: 0.75rem;
  font-family: var(--michael-font-hand);
  line-height: 1.5;
}

.tag-primary {
  background-color: var(--michael-black);
  color: var(--michael-cream);
}

.tag-accent {
  background-color: color-mix(in srgb, var(--michael-accent) 15%, transparent);
  color: var(--michael-accent);
}

.tag-license {
  background: linear-gradient(to right, var(--michael-brown), var(--michael-gray));
  color: var(--michael-cream);
  cursor: pointer;
  transition: background 0.2s ease;
}

.tag-license:hover {
  background: var(--michael-accent);
}

/* ==========================================================================
   Component: Bible Card
   ========================================================================== */

.bible-card {
  display: block;
  text-decoration: none;
  color: inherit;
  transition: box-shadow 0.2s ease;
}

.bible-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.bible-card h2 {
  font-family: var(--michael-font-hand);
  margin-block-end: 0.5rem;
}

.bible-card p {
  color: var(--michael-gray);
  font-family: var(--michael-font-hand);
  font-size: 0.875rem;
  margin-block-end: 0.75rem;
}

.bible-card .tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

/* ==========================================================================
   Component: Filter Buttons
   ========================================================================== */

.filter-group {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.5rem;
}

.filter-group button {
  padding: 0.25rem 0.75rem;
  font-size: 0.875rem;
  font-family: var(--michael-font-hand);
  border: 1px solid var(--michael-black);
  background: transparent;
  color: var(--michael-black);
  border-radius: var(--pico-border-radius);
  transition: all 0.2s ease;
}

.filter-group button:hover,
.filter-group button[aria-pressed="true"] {
  background: var(--michael-accent);
  border-color: var(--michael-accent);
  color: white;
}

.filter-group button:focus-visible {
  outline: 2px solid var(--michael-accent);
  outline-offset: 2px;
}

/* ==========================================================================
   Component: Bible Navigation
   ========================================================================== */

.bible-nav {
  background: var(--michael-light);
  border: 1px solid var(--michael-border);
  border-radius: var(--pico-border-radius);
  padding: var(--pico-spacing);
}

.bible-nav .nav-controls {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
}

@media (min-width: 768px) {
  .bible-nav .nav-controls {
    gap: 1rem;
  }
}

.bible-nav select {
  font-family: var(--michael-font-hand);
  font-size: 0.875rem;
  padding: 0.375rem 2rem 0.375rem 0.75rem;
  margin-bottom: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b6560' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;
  background-size: 0.75rem;
}

.bible-nav .nav-buttons {
  display: flex;
  gap: 0.25rem;
  margin-inline-start: auto;
}

.bible-nav .nav-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  padding: 0;
  border: 1px solid var(--michael-border);
  background: var(--michael-white);
  border-radius: var(--pico-border-radius);
  color: var(--michael-black);
  text-decoration: none;
  transition: all 0.2s ease;
}

.bible-nav .nav-btn:hover:not([aria-disabled="true"]) {
  border-color: var(--michael-accent);
  color: var(--michael-accent);
}

.bible-nav .nav-btn[aria-disabled="true"] {
  opacity: 0.4;
  cursor: not-allowed;
}

/* ==========================================================================
   Component: Bible Text
   ========================================================================== */

.bible-text {
  line-height: 1.8;
}

.bible-text .verse {
  margin-block-end: 0.5rem;
}

.bible-text .verse-num {
  font-weight: bold;
  color: var(--michael-accent);
  margin-inline-end: 0.25rem;
  font-size: 0.75em;
  vertical-align: super;
}

.bible-text .strongs-ref {
  color: var(--michael-accent);
  cursor: pointer;
  text-decoration: underline dotted;
}

.bible-text .strongs-ref:hover {
  text-decoration: underline solid;
}

/* Verse sharing */
.verse-share-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem;
  height: 1.25rem;
  padding: 0;
  margin-inline-start: 0.25rem;
  background: transparent;
  border: none;
  color: var(--michael-gray);
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s ease;
  vertical-align: middle;
}

.verse:hover .verse-share-btn,
.verse-share-btn:focus {
  opacity: 1;
}

.verse-share-btn:hover {
  color: var(--michael-accent);
}

.highlight-verse {
  background-color: color-mix(in srgb, var(--michael-accent) 20%, transparent);
  border-radius: 2px;
  padding: 0.125rem;
}

/* ==========================================================================
   Component: Share Menu
   ========================================================================== */

.share-menu {
  position: absolute;
  z-index: 100;
  background: var(--michael-white);
  border: 1px solid var(--michael-border);
  border-radius: var(--pico-border-radius);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  padding: 0.25rem 0;
  min-width: 150px;
}

.share-menu-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.5rem 1rem;
  background: none;
  border: none;
  text-align: left;
  font-family: var(--michael-font-hand);
  font-size: 0.875rem;
  color: var(--michael-black);
  cursor: pointer;
  transition: background 0.2s ease;
}

.share-menu-item:hover {
  background: var(--michael-light);
}

.share-menu-divider {
  height: 1px;
  background: var(--michael-border);
  margin: 0.25rem 0;
}

/* ==========================================================================
   Component: Strong's Tooltip
   ========================================================================== */

.strongs-tooltip {
  position: fixed;
  z-index: 200;
  max-width: 300px;
  padding: 0.75rem 1rem;
  background: var(--michael-white);
  border: 1px solid var(--michael-border);
  border-radius: var(--pico-border-radius);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  font-family: var(--michael-font-hand);
  font-size: 0.875rem;
}

.strongs-tooltip h4 {
  margin: 0 0 0.5rem;
  color: var(--michael-accent);
  font-size: 1rem;
}

.strongs-tooltip p {
  margin: 0;
  color: var(--michael-black);
}

/* ==========================================================================
   Component: Color Picker
   ========================================================================== */

.color-picker {
  position: absolute;
  z-index: 50;
  top: 100%;
  right: 0;
  margin-top: 0.5rem;
  padding: 0.5rem;
  background: var(--michael-white);
  border: 1px solid var(--michael-border);
  border-radius: var(--pico-border-radius);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.color-picker .color-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.25rem;
}

.color-picker .color-option {
  width: 1.5rem;
  height: 1.5rem;
  padding: 0;
  border: 1px solid var(--michael-border);
  border-radius: var(--pico-border-radius);
  cursor: pointer;
  transition: transform 0.1s ease;
}

.color-picker .color-option:hover {
  transform: scale(1.1);
}

/* Color preview button */
.color-btn {
  width: 1.25rem;
  height: 1.25rem;
  padding: 0;
  border: 1px solid var(--michael-gray);
  border-radius: var(--pico-border-radius);
  cursor: pointer;
}

/* ==========================================================================
   Component: Parallel/Compare View
   ========================================================================== */

.parallel-pane {
  background: color-mix(in srgb, var(--michael-white) 80%, transparent);
  backdrop-filter: blur(4px);
}

.parallel-verse {
  padding: 0.75rem;
  border-bottom: 1px solid var(--michael-border);
}

.parallel-verse:last-child {
  border-bottom: none;
}

.parallel-verse-num {
  font-weight: bold;
  color: var(--michael-accent);
  margin-inline-end: 0.5rem;
}

.translation-label {
  font-family: var(--michael-font-hand);
  font-weight: bold;
  color: var(--michael-gray);
  font-size: 0.75rem;
  margin-block-end: 0.25rem;
}

/* Diff highlighting */
.diff-insert {
  background-color: var(--highlight-color, #6b4c6b);
  color: white;
  padding: 0.125rem 0.25rem;
  border-radius: 2px;
}

.diff-delete {
  text-decoration: line-through;
  opacity: 0.6;
}

/* ==========================================================================
   Component: Search Results
   ========================================================================== */

.search-result {
  margin-block-end: var(--pico-spacing);
}

.search-result header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-block-end: 0.5rem;
}

.search-result h3 {
  font-family: var(--michael-font-hand);
  margin: 0;
}

.search-result .reference {
  font-family: var(--michael-font-hand);
  color: var(--michael-gray);
  font-size: 0.875rem;
}

.search-result .verse-text {
  line-height: 1.6;
}

.search-result mark {
  background-color: color-mix(in srgb, yellow 50%, transparent);
  padding: 0.0625rem 0.125rem;
  border-radius: 2px;
}

/* ==========================================================================
   Layout Utilities
   ========================================================================== */

.actions {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Hide utility */
.hidden {
  display: none !important;
}

/* Grid utilities for responsive layouts */
.grid-2 {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--pico-spacing);
}

@media (min-width: 768px) {
  .grid-2 {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ==========================================================================
   Canonical Comparison Table
   ========================================================================== */

.canon-table {
  font-family: var(--michael-font-hand);
  font-size: 0.875rem;
}

.canon-table th {
  background: var(--michael-bright);
  position: sticky;
  top: 0;
}

.canon-table td:first-child,
.canon-table td:nth-child(2) {
  position: sticky;
  left: 0;
  background: var(--michael-bright);
}

.canon-table td:nth-child(2) {
  left: 2rem;
}

.canon-table tr:hover td {
  background: var(--michael-light);
}

.canon-table .section-row td {
  background: color-mix(in srgb, var(--michael-light) 50%, transparent);
  font-weight: bold;
  color: var(--michael-gray);
}

.canon-table .present {
  color: #16a34a;
}

.canon-table .absent {
  color: var(--michael-gray);
  opacity: 0.4;
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

@media print {
  .bible-nav,
  .filter-group,
  .actions,
  .verse-share-btn,
  .share-menu {
    display: none !important;
  }

  .bible-text {
    font-size: 11pt;
    line-height: 1.5;
  }
}
